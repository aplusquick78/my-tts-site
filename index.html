<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A+ ì‹ ì†í•œ ë°°ì†¡ ê³ í€„ë¦¬í‹° TTS</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background-color: #f0f2f5; margin: 0; }
        .card { background: white; padding: 2.5rem; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); width: 90%; max-width: 450px; text-align: center; }
        h2 { color: #1a1a1a; margin-bottom: 5px; }
        .subtitle { color: #666; font-size: 0.9rem; margin-bottom: 20px; }
        textarea { width: 100%; height: 150px; padding: 15px; border: 1px solid #ddd; border-radius: 12px; resize: none; margin-bottom: 15px; box-sizing: border-box; font-size: 1rem; }
        input[type="password"] { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn-group { display: flex; gap: 10px; }
        button { flex: 1; padding: 15px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; transition: 0.2s; font-size: 1rem; }
        .btn-generate { background-color: #000; color: white; }
        .btn-generate:hover { background-color: #333; }
        .btn-generate:disabled { background-color: #ccc; cursor: not-allowed; }
        #audio-player { width: 100%; margin-top: 20px; display: none; }
        .download-link { display: none; margin-top: 15px; color: #007bff; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ğŸ“¢ ê³ í€„ë¦¬í‹° AI TTS</h2>
        <p class="subtitle">ì‹ ì†í•œ ë°°ì†¡ì„ ìœ„í•œ AI ëª©ì†Œë¦¬ ìƒì„±</p>
        
        <input type="password" id="api-key" placeholder="ElevenLabs API Keyë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        <textarea id="text-input" placeholder="ì—¬ê¸°ì— ë³€í™˜í•  ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
        
        <div class="btn-group">
            <button id="gen-btn" class="btn-generate" onclick="generateAudio()">ğŸµ ëª©ì†Œë¦¬ ë§Œë“¤ê¸° & ë‹¤ìš´ë¡œë“œ</button>
        </div>

        <audio id="audio-player" controls></audio>
        <a id="download-link" class="download-link">ğŸ’¾ MP3 íŒŒì¼ ì €ì¥í•˜ê¸°</a>
        <p id="status" style="font-size: 0.8rem; color: #888; margin-top: 10px;"></p>
    </div>

    <script>
        async function generateAudio() {
            const apiKey = document.getElementById('api-key').value;
            const text = document.getElementById('text-input').value;
            const genBtn = document.getElementById('gen-btn');
            const status = document.getElementById('status');
            const audioPlayer = document.getElementById('audio-player');
            const downloadLink = document.getElementById('download-link');

            if (!apiKey) return alert("API Keyë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
            if (!text) return alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");

            genBtn.disabled = true;
            status.innerText = "â³ AIê°€ ëª©ì†Œë¦¬ë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...";

            // ElevenLabs API ì„¤ì • (ëª©ì†Œë¦¬ ID: Min-ho ë˜ëŠ” ë¶€ë“œëŸ¬ìš´ ëª©ì†Œë¦¬ ì„ íƒ ê°€ëŠ¥)
            // ì•„ë˜ IDëŠ” í•œêµ­ì–´ì— ìµœì í™”ëœ ëª©ì†Œë¦¬ ì˜ˆì‹œì…ë‹ˆë‹¤.
            const VOICE_ID = 'pNInz6obpgDQGcFmaJgB'; 

            try {
                const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${VOICE_ID}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'xi-api-key': apiKey
                    },
                    body: JSON.stringify({
                        text: text,
                        model_id: "eleven_multilingual_v2",
                        voice_settings: { stability: 0.5, similarity_boost: 0.75 }
                    })
                });

                if (!response.ok) throw new Error("API ìš”ì²­ ì‹¤íŒ¨! í‚¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.");

                const blob = await response.blob();
                const url = URL.createObjectURL(blob);

                // ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ì—°ê²°
                audioPlayer.src = url;
                audioPlayer.style.display = "block";
                audioPlayer.play();

                // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
                downloadLink.href = url;
                downloadLink.download = "A_plus_delivery.mp3";
                downloadLink.style.display = "inline-block";
                downloadLink.innerText = "ğŸ’¾ ìƒì„± ì™„ë£Œ! í´ë¦­í•´ì„œ ë‹¤ìš´ë¡œë“œ";

                status.innerText = "âœ… ì„±ê³µì ìœ¼ë¡œ ë³€í™˜ë˜ì—ˆìŠµë‹ˆë‹¤!";
            } catch (error) {
                alert(error.message);
                status.innerText = "âŒ ì˜¤ë¥˜ ë°œìƒ";
            } finally {
                genBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
