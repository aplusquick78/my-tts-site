<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A+ ì‹ ì†í•œ ë°°ì†¡ | AI ì•ˆë‚˜ ëª©ì†Œë¦¬</title>
    <style>
        /* ë””ìì¸: ê¹”ë”í•˜ê³  ì‹ ë¢°ê° ìˆëŠ” ë¸”ë£¨/ë‹¤í¬í†¤ */
        body { font-family: 'Pretendard', -apple-system, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background-color: #f4f7f9; margin: 0; }
        .card { background: white; padding: 2.5rem; border-radius: 24px; box-shadow: 0 20px 40px rgba(0,0,0,0.08); width: 90%; max-width: 460px; text-align: center; }
        h2 { color: #0078d4; margin-bottom: 8px; font-size: 1.5rem; }
        .subtitle { color: #666; font-size: 0.9rem; margin-bottom: 25px; }
        
        .input-label { display: block; text-align: left; font-size: 0.85rem; font-weight: bold; color: #444; margin-bottom: 5px; margin-left: 5px; }
        input[type="password"] { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; }
        textarea { width: 100%; height: 140px; padding: 15px; border: 1.5px solid #eee; border-radius: 12px; resize: none; margin-bottom: 20px; box-sizing: border-box; font-size: 1rem; line-height: 1.5; }
        
        .btn-generate { width: 100%; padding: 16px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 1.1rem; background-color: #0078d4; color: white; transition: all 0.2s; box-shadow: 0 4px 12px rgba(0,120,212,0.3); }
        .btn-generate:hover { background-color: #005a9e; transform: translateY(-1px); }
        .btn-generate:disabled { background-color: #ccc; box-shadow: none; cursor: not-allowed; }
        
        #audio-player { width: 100%; margin-top: 25px; display: none; border-radius: 8px; }
        .download-btn { display: none; margin-top: 15px; background-color: #28a745; color: white; text-decoration: none; padding: 12px; border-radius: 10px; font-weight: bold; font-size: 0.95rem; }
        .download-btn:hover { background-color: #218838; }
        #status { font-size: 0.85rem; color: #888; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ğŸ“¢ A+ ì‹ ì†í•œ ë°°ì†¡</h2>
        <p class="subtitle">ì•ˆë‚˜í‚´ AI ëª©ì†Œë¦¬ë¡œ ì•ˆë‚´ ë°©ì†¡ ë§Œë“¤ê¸°</p>
        
        <label class="input-label">ElevenLabs API KEY</label>
        <input type="password" id="api-key" placeholder="í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        
        <label class="input-label">ì•ˆë‚´ ë¬¸êµ¬ ì…ë ¥</label>
        <textarea id="text-input" placeholder="ì˜ˆ: ì•ˆë…•í•˜ì„¸ìš”, A+ ì‹ ì†í•œ ë°°ì†¡ì…ë‹ˆë‹¤. ìƒí’ˆì´ ê³§ ë„ì°©í•  ì˜ˆì •ì…ë‹ˆë‹¤."></textarea>
        
        <button id="gen-btn" class="btn-generate" onclick="generateAudio()">âœ¨ ëª©ì†Œë¦¬ ìƒì„± & ë‹¤ìš´ë¡œë“œ</button>

        <audio id="audio-player" controls></audio>
        <a id="download-link" class="download-btn">ğŸ’¾ MP3 íŒŒì¼ ì €ì¥í•˜ê¸°</a>
        <p id="status">API Keyë¥¼ ì…ë ¥í•˜ê³  ë¬¸êµ¬ë¥¼ ì‘ì„±í•´ ì£¼ì„¸ìš”.</p>
    </div>

    <script>
        async function generateAudio() {
            const apiKey = document.getElementById('api-key').value;
            const text = document.getElementById('text-input').value;
            const genBtn = document.getElementById('gen-btn');
            const status = document.getElementById('status');
            const audioPlayer = document.getElementById('audio-player');
            const downloadLink = document.getElementById('download-link');

            if (!apiKey) return alert("ElevenLabs API Keyë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
            if (!text) return alert("ì½ì„ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");

            genBtn.disabled = true;
            status.innerText = "â³ ì•ˆë‚˜í‚´ ëª©ì†Œë¦¬ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...";

            // ElevenLabs ì•ˆë‚˜(Anna) Voice ID
            const ANNA_VOICE_ID = 'jBpfuIE2acCO8z3wKNLl'; 

            try {
                const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${ANNA_VOICE_ID}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'xi-api-key': apiKey
                    },
                    body: JSON.stringify({
                        text: text,
                        model_id: "eleven_multilingual_v2",
                        voice_settings: { 
                            stability: 0.5, 
                            similarity_boost: 0.8,
                            style: 0.0,
                            use_speaker_boost: true
                        }
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.detail?.status === "invalid_api_key" ? "API í‚¤ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤." : "ìƒì„± ì‹¤íŒ¨! ì”ì—¬ ê¸€ììˆ˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
                }

                const blob = await response.blob();
                const url = URL.createObjectURL(blob);

                // ì˜¤ë””ì˜¤ ì¬ìƒ
                audioPlayer.src = url;
                audioPlayer.style.display = "block";
                audioPlayer.play();

                // ë‹¤ìš´ë¡œë“œ ë§í¬ í™œì„±í™”
                downloadLink.href = url;
                downloadLink.download = "A_Plus_Anna_Voice.mp3";
                downloadLink.style.display = "block";

                status.innerText = "âœ… ì•ˆë‚˜ì˜ ëª©ì†Œë¦¬ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!";
            } catch (error) {
                alert(error.message);
                status.innerText = "âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
            } finally {
                genBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
