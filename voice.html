<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A+ ì‹ ì†í•œ ë°°ì†¡ | Nova ëª©ì†Œë¦¬</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background-color: #f0f2f5; margin: 0; }
        .card { background: white; padding: 2.5rem; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); width: 90%; max-width: 450px; text-align: center; }
        h2 { color: #ff0050; margin-bottom: 5px; } /* í‹±í†¡ ì»¬ëŸ¬ í¬ì¸íŠ¸ */
        .subtitle { color: #666; font-size: 0.9rem; margin-bottom: 25px; }
        textarea { width: 100%; height: 150px; padding: 15px; border: 2px solid #eee; border-radius: 12px; resize: none; margin-bottom: 20px; box-sizing: border-box; font-size: 1rem; }
        .btn-generate { width: 100%; padding: 15px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 1.1rem; background-color: #000; color: white; transition: 0.2s; }
        .btn-generate:hover { background-color: #333; }
        .btn-generate:disabled { background-color: #ccc; }
        #audio-player { width: 100%; margin-top: 25px; display: none; }
        .download-btn { display: none; margin-top: 15px; background-color: #25f4ee; color: #000; text-decoration: none; padding: 12px; border-radius: 10px; font-weight: bold; }
        #status { font-size: 0.85rem; color: #888; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ğŸ“¢ A+ ì‹ ì†í•œ ë°°ì†¡</h2>
        <p class="subtitle">í‹±í†¡ Nova AI ëª©ì†Œë¦¬ ë³€í™˜ (ë¬´ë£Œ)</p>
        
        <textarea id="text-input" placeholder="ì•ˆë‚´ ë¬¸êµ¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ì˜ˆ: ìƒí’ˆì´ ì‹ ì†í•˜ê²Œ ë°°ì†¡ ì¤‘ì…ë‹ˆë‹¤!)"></textarea>
        
        <button id="gen-btn" class="btn-generate" onclick="generateTikTokAudio()">ğŸ”Š Nova ëª©ì†Œë¦¬ ë§Œë“¤ê¸°</button>

        <audio id="audio-player" controls></audio>
        <a id="download-link" class="download-btn">ğŸ’¾ MP3 íŒŒì¼ ì €ì¥í•˜ê¸°</a>
        <p id="status">ë¬¸ì¥ì„ ì…ë ¥í•˜ê³  ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.</p>
    </div>

    <script>
        async function generateTikTokAudio() {
            const text = document.getElementById('text-input').value;
            const genBtn = document.getElementById('gen-btn');
            const status = document.getElementById('status');
            const audioPlayer = document.getElementById('audio-player');
            const downloadLink = document.getElementById('download-link');

            if (!text) return alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");

            genBtn.disabled = true;
            status.innerText = "â³ Nova ëª©ì†Œë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...";

            try {
                // í‹±í†¡ TTS ë¬´ë£Œ API ì—”ë“œí¬ì¸íŠ¸ (ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡ì‹œ ì‚¬ìš©)
                const response = await fetch('https://tiktok-tts.weilbyte.dev/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        text: text,
                        voice: 'ko_kr_002' // ko_kr_002ê°€ í‹±í†¡ì˜ í•œêµ­ì–´ Nova(ì—¬ì„±) ìŒì„± ì½”ë“œì…ë‹ˆë‹¤.
                    })
                });

                if (!response.ok) throw new Error("ìŒì„± ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");

                const data = await response.json();
                const audioBase64 = data.audio; // APIê°€ base64 ë°ì´í„°ë¥¼ ë°˜í™˜í•¨

                const audioUrl = `data:audio/mp3;base64,${audioBase64}`;

                // ì˜¤ë””ì˜¤ ì¬ìƒ
                audioPlayer.src = audioUrl;
                audioPlayer.style.display = "block";
                audioPlayer.play();

                // ë‹¤ìš´ë¡œë“œ ì„¤ì •
                downloadLink.href = audioUrl;
                downloadLink.download = "Nova_Voice.mp3";
                downloadLink.style.display = "block";

                status.innerText = "âœ… ëª©ì†Œë¦¬ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!";
            } catch (error) {
                console.error(error);
                status.innerText = "âŒ ì˜¤ë¥˜ ë°œìƒ (ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”)";
            } finally {
                genBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
