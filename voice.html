<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A+ ì‹ ì†í•œ ë°°ì†¡ | ê³ í€„ë¦¬í‹° TTS</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background-color: #f4f4f9; margin: 0; }
        .card { background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 90%; max-width: 420px; text-align: center; }
        h2 { color: #00c73c; margin-bottom: 5px; } /* ë„¤ì´ë²„ ìŠ¤íƒ€ì¼ í¬ì¸íŠ¸ */
        .subtitle { color: #666; font-size: 0.85rem; margin-bottom: 20px; }
        textarea { width: 100%; height: 120px; padding: 12px; border: 1.5px solid #ddd; border-radius: 10px; resize: none; margin-bottom: 15px; box-sizing: border-box; font-size: 1rem; }
        .btn-generate { width: 100%; padding: 15px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 1.1rem; background-color: #00c73c; color: white; transition: 0.2s; }
        .btn-generate:hover { background-color: #00a832; }
        .btn-generate:disabled { background-color: #ccc; }
        audio { width: 100%; margin-top: 20px; display: none; }
        .download-btn { display: none; margin-top: 15px; background-color: #333; color: white; text-decoration: none; padding: 12px; border-radius: 10px; font-weight: bold; font-size: 0.9rem; }
        #status { font-size: 0.8rem; color: #999; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ğŸ“¢ A+ ì‹ ì†í•œ ë°°ì†¡</h2>
        <p class="subtitle">ë„¤ì´ë²„ ê¸°ë°˜ ê³ í€„ë¦¬í‹° ë¬´ë£Œ ëª©ì†Œë¦¬</p>
        
        <textarea id="text-input" placeholder="ë°°ì†¡ ì•ˆë‚´ ë¬¸êµ¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”.">ì•ˆë…•í•˜ì„¸ìš”. A+ ì‹ ì†í•œ ë°°ì†¡ì…ë‹ˆë‹¤. ìš”ì²­í•˜ì‹  ë¬¼í’ˆì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤.</textarea>
        
        <button id="gen-btn" class="btn-generate" onclick="generateTTS()">ğŸ”Š ëª©ì†Œë¦¬ ìƒì„±í•˜ê¸°</button>

        <audio id="audio-player" controls></audio>
        <a id="download-link" class="download-btn">ğŸ’¾ MP3 íŒŒì¼ ì €ì¥í•˜ê¸°</a>
        <p id="status">ë¬¸ì¥ì„ ì…ë ¥í•˜ê³  ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
    </div>

    <script>
        async function generateTTS() {
            const text = document.getElementById('text-input').value;
            const genBtn = document.getElementById('gen-btn');
            const status = document.getElementById('status');
            const audioPlayer = document.getElementById('audio-player');
            const downloadLink = document.getElementById('download-link');

            if (!text) return alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");

            genBtn.disabled = true;
            status.innerText = "â³ ëª©ì†Œë¦¬ë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...";

            // ë„¤ì´ë²„ TTS ì—”ì§„ ìš°íšŒ API (ë§¤ìš° ì•ˆì •ì )
            const apiUrl = `https://api.ispeech.org/api/rest?apikey=developertestkey&action=convert&voice=krkoreanfemale&text=${encodeURIComponent(text)}`;

            try {
                // ì˜¤ë””ì˜¤ í™•ì¸ ì‘ì—…ì„ ìœ„í•´ fetch í…ŒìŠ¤íŠ¸
                audioPlayer.src = apiUrl;
                audioPlayer.style.display = "block";
                
                // ì¬ìƒ ì‹œë„
                const playPromise = audioPlayer.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        status.innerText = "âœ… ëª©ì†Œë¦¬ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!";
                        downloadLink.href = apiUrl;
                        downloadLink.download = "A_plus_Voice.mp3";
                        downloadLink.style.display = "block";
                    }).catch(error => {
                        throw new Error("ë¸Œë¼ìš°ì €ê°€ ì¬ìƒì„ ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤. ë²„íŠ¼ì„ ë‹¤ì‹œ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
                    });
                }
            } catch (error) {
                status.innerText = "âŒ ì˜¤ë¥˜ ë°œìƒ: ë‹¤ë¥¸ ë¬¸ì¥ìœ¼ë¡œ ì‹œë„í•´ë³´ì„¸ìš”.";
                console.error(error);
            } finally {
                genBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
