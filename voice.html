<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A+ ì‹ ì†í•œ ë°°ì†¡ | ê³ í€„ë¦¬í‹° TTS</title>
    <style>
        :root { --main-color: #ff0050; --sub-color: #25f4ee; }
        body { font-family: 'Pretendard', sans-serif; background-color: #f8f9fa; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .card { background: white; padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); width: 95%; max-width: 420px; text-align: center; position: relative; overflow: hidden; }
        .card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: linear-gradient(90deg, var(--main-color), var(--sub-color)); }
        h2 { margin-top: 10px; color: #333; font-size: 1.4rem; }
        textarea { width: 100%; height: 130px; border: 1.5px solid #eee; border-radius: 15px; padding: 15px; font-size: 1rem; resize: none; box-sizing: border-box; margin-bottom: 20px; transition: 0.3s; }
        textarea:focus { border-color: var(--main-color); outline: none; }
        .btn-group { display: flex; flex-direction: column; gap: 10px; }
        button { padding: 16px; border: none; border-radius: 12px; font-weight: bold; font-size: 1.1rem; cursor: pointer; transition: 0.2s; }
        .btn-nova { background-color: #000; color: white; }
        .btn-nova:hover { background-color: #222; transform: translateY(-2px); }
        .btn-nova:disabled { background-color: #ccc; cursor: not-allowed; }
        #audio-player { width: 100%; margin-top: 20px; display: none; }
        .download-link { display: none; margin-top: 15px; background-color: var(--sub-color); color: #000; text-decoration: none; padding: 12px; border-radius: 10px; font-weight: bold; font-size: 0.9rem; }
        #status { margin-top: 15px; font-size: 0.85rem; color: #888; min-height: 1.2rem; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸš€ A+ ì‹ ì†í•œ ë°°ì†¡</h2>
    <p style="color:#666; font-size:0.85rem; margin-bottom:20px;">Nova(í‹±í†¡) ê³ í€„ë¦¬í‹° ë¬´ë£Œ ìŒì„±</p>
    
    <textarea id="text-input" placeholder="ì•ˆë‚´ ë¬¸êµ¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">ì•ˆë…•í•˜ì„¸ìš”! A+ ì‹ ì†í•œ ë°°ì†¡ì…ë‹ˆë‹¤. ìƒí’ˆì´ ê³§ ë„ì°©í•  ì˜ˆì •ì…ë‹ˆë‹¤.</textarea>
    
    <div class="btn-group">
        <button id="gen-btn" class="btn-nova" onclick="generateAudio()">ğŸ”Š Nova ëª©ì†Œë¦¬ ìƒì„±</button>
        <a id="download-link" class="download-link">ğŸ’¾ MP3 íŒŒì¼ ì €ì¥í•˜ê¸°</a>
    </div>

    <audio id="audio-player" controls></audio>
    <p id="status"></p>
</div>

<script>
    async function generateAudio() {
        const text = document.getElementById('text-input').value;
        const genBtn = document.getElementById('gen-btn');
        const status = document.getElementById('status');
        const audioPlayer = document.getElementById('audio-player');
        const downloadLink = document.getElementById('download-link');

        if (!text) return alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");

        genBtn.disabled = true;
        status.innerText = "â³ ëª©ì†Œë¦¬ ìƒì„± ì¤‘... (ìµœëŒ€ 10ì´ˆ ì†Œìš”)";
        status.style.color = "#888";

        try {
            // í‹±í†¡ TTS ì—”ì§„ ì‚¬ìš© (ìš°íšŒ API)
            const response = await fetch('https://tiktok-tts.weilbyte.dev/api/generate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    text: text,
                    voice: 'ko_kr_002' // Nova ëª©ì†Œë¦¬ ì½”ë“œ
                })
            });

            const data = await response.json();

            if (data.success === false || !data.audio) {
                throw new Error("ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜");
            }

            const audioBase64 = data.audio;
            const audioUrl = `data:audio/mp3;base64,${audioBase64}`;

            // ê²°ê³¼ ì ìš©
            audioPlayer.src = audioUrl;
            audioPlayer.style.display = "block";
            audioPlayer.play();

            downloadLink.href = audioUrl;
            downloadLink.download = "Aplus_Nova_Voice.mp3";
            downloadLink.style.display = "block";

            status.innerText = "âœ… ìƒì„± ì™„ë£Œ!";
            status.style.color = "#28a745";

        } catch (error) {
            console.error(error);
            // ì‹¤íŒ¨ ì‹œ ë‹¤ë¥¸ ë°±ì—… ì„œë²„ ì‹œë„ ì•Œë¦¼
            status.innerText = "âŒ í˜„ì¬ ì ‘ì†ìê°€ ë§ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
            status.style.color = "#ff4d4d";
        } finally {
            genBtn.disabled = false;
        }
    }
</script>

</body>
</html>
